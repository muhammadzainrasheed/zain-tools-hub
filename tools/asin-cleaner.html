
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASIN Cleaner ‚Äî Zain Tools Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<!-- ===== NAVIGATION ===== -->
<nav class="nav">
    <a href="../index.html" class="nav-brand">‚ö° Zain Tools</a>
    <div class="nav-links">
        <a href="../index.html"              class="nav-btn">üè† Home</a>
        <a href="word-changer.html"          class="nav-btn">‚úèÔ∏è Word Changer</a>
        <a href="asin-cleaner.html"          class="nav-btn">üßπ ASIN Cleaner</a>
        <a href="asin-splitter.html"         class="nav-btn">üì¶ ASIN 900</a>
        <a href="voucher-tool.html"          class="nav-btn">üéüÔ∏è Vouchers</a>
    </div>
</nav>

<!-- ===== ASIN CLEANER PAGE ===== -->
<div style="padding: 2rem;">
    <div class="cleaner-wrap">

        <h2>üßπ ASIN Cleaner Tool</h2>

        <div class="cleaner-grid">
            <!-- Valid ASINs -->
            <div>
                <p class="cleaner-label valid">‚úÖ Valid ASINs (semicolon or newline separated)</p>
                <textarea
                    id="validAsins"
                    class="cleaner-textarea"
                    placeholder="B0FKNC23V6;B0FLYFJTZQ;B0FLYMQSTP..."></textarea>
                <p class="cleaner-count">Total: <span id="validCount">0</span> ASINs</p>
            </div>

            <!-- Problematic ASINs -->
            <div>
                <p class="cleaner-label prob">‚ùå Problematic ASINs (paste Amazon error messages)</p>
                <textarea
                    id="problematicAsins"
                    class="cleaner-textarea"
                    placeholder="B0FQBWM91R&#10;Restricted product&#10;This ASIN is identified as an adult product...&#10;&#10;B0FNMJPQ5L&#10;Restricted product..."></textarea>
                <p class="cleaner-count">Detected: <span id="problematicCount">0</span> ASINs</p>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="cleaner-btns">
            <button class="btn-primary" onclick="cleanAsins()">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Clean ASINs
            </button>
            <button class="btn-secondary" onclick="resetCleaner()">
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
                Reset
            </button>
        </div>

        <!-- Stats Row (hidden initially) -->
        <div id="cleanerStats" style="display:none;">
            <div class="stats-row">
                <div class="stat-box blue">
                    <div class="num" id="totalStats">0</div>
                    <div class="lbl">Total Initial ASINs</div>
                </div>
                <div class="stat-box red">
                    <div class="num" id="removedStats">0</div>
                    <div class="lbl">ASINs Removed</div>
                </div>
                <div class="stat-box green">
                    <div class="num" id="finalStats">0</div>
                    <div class="lbl">Final Clean ASINs</div>
                </div>
            </div>
        </div>

        <!-- Output (hidden initially) -->
        <div id="cleanerOutput" style="display:none;">
            <div class="output-header">
                <span class="output-label">‚úÖ Cleaned ASINs (Ready to Use!)</span>
                <div class="output-btns">
                    <button class="btn-green" onclick="copyCleanedAsins()">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                        Copy
                    </button>
                    <button class="btn-blue" onclick="downloadCleaned()">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Download
                    </button>
                </div>
            </div>
            <textarea id="cleanedAsins" class="output-textarea" readonly></textarea>
        </div>

    </div>
</div>

<script src="../js/main.js"></script>
<script>
/* ================================================
   ASIN CLEANER ‚Äî Tool Logic
   ================================================ */

// Live count updates
document.getElementById('validAsins').addEventListener('input', function () {
    const count = this.value.split(/[;\n]/).filter(a => a.trim()).length;
    document.getElementById('validCount').textContent = count;
});

document.getElementById('problematicAsins').addEventListener('input', function () {
    const m = this.value.match(/B0[A-Z0-9]{8}/g);
    document.getElementById('problematicCount').textContent = m ? m.length : 0;
});

function cleanAsins() {
    const validList = document.getElementById('validAsins').value
        .split(/[;\n]/).map(a => a.trim()).filter(a => a);

    if (validList.length === 0) {
        showToast('‚ùå Please paste Valid ASINs first', true);
        return;
    }

    const probMatches = document.getElementById('problematicAsins').value.match(/B0[A-Z0-9]{8}/g);
    const problemSet  = new Set(probMatches || []);
    const cleaned     = validList.filter(a => !problemSet.has(a));

    document.getElementById('cleanedAsins').value    = cleaned.join(';');
    document.getElementById('totalStats').textContent   = validList.length;
    document.getElementById('removedStats').textContent = validList.length - cleaned.length;
    document.getElementById('finalStats').textContent   = cleaned.length;

    document.getElementById('cleanerStats').style.display  = 'block';
    document.getElementById('cleanerOutput').style.display = 'block';

    showToast(`‚úÖ Done! ${cleaned.length} clean ASINs ready.`);
}

function copyCleanedAsins() {
    const text = document.getElementById('cleanedAsins').value;
    if (!text) { showToast('‚ö†Ô∏è Nothing to copy!', true); return; }
    navigator.clipboard.writeText(text).then(() => showToast('‚úÖ Cleaned ASINs copied!'));
}

function downloadCleaned() {
    const text = document.getElementById('cleanedAsins').value;
    if (!text) { showToast('‚ö†Ô∏è Nothing to download!', true); return; }
    const blob = new Blob([text], { type: 'text/plain' });
    const url  = URL.createObjectURL(blob);
    const a    = document.createElement('a');
    a.href     = url;
    a.download = 'cleaned_asins.txt';
    a.click();
    URL.revokeObjectURL(url);
    showToast('‚úÖ File downloaded!');
}

function resetCleaner() {
    ['validAsins', 'problematicAsins', 'cleanedAsins'].forEach(id => {
        document.getElementById(id).value = '';
    });
    ['validCount', 'problematicCount'].forEach(id => {
        document.getElementById(id).textContent = '0';
    });
    document.getElementById('cleanerStats').style.display  = 'none';
    document.getElementById('cleanerOutput').style.display = 'none';
    showToast('üîÑ Reset done!');
}
</script>
</body>
</html>
